<div class="chat-container">
  <!-- Chat Header -->
  <header class="chat-header">
    <div class="header-content">
      <h1 class="app-title">💬 Chat</h1>
      <div class="user-info">
        <span class="user-name">{{ currentUser?.displayName || currentUser?.username }}</span>
        <a routerLink="/home" class="home-link">Home</a>
      </div>
    </div>
  </header>

  <!-- Chat Layout -->
  <div class="chat-layout">
    <!-- Unified Sidebar -->
    <aside class="chat-sidebar">
      <!-- Online Users and Rooms -->
      <div class="sidebar-content">
        <h3>Online Users & Rooms</h3>
        
        <!-- Online Users -->
        <div class="users-section" *ngIf="onlineUsers.length > 0">
          <h4>Users ({{ onlineUsers.length }})</h4>
          <div class="items-list">
            <div class="item user-item" *ngFor="let user of onlineUsers">
              <div class="item-avatar">
                <span class="avatar-initial">{{ getInitials(user.username) }}</span>
                <div class="online-dot"></div>
              </div>
              <div class="item-info">
                <span class="item-name">{{ user.displayName || user.username }}</span>
                <span class="item-status">Online</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Sample Rooms (will be updated when room data is available) -->
        <div class="rooms-section">
          <h4>Rooms</h4>
          <div class="items-list">
            <div class="item room-item">
              <div class="item-avatar room-avatar">
                <span class="avatar-initial">🏠</span>
              </div>
              <div class="item-info">
                <span class="item-name">General</span>
                <span class="item-status">Public Room</span>
              </div>
            </div>
            <div class="item room-item">
              <div class="item-avatar room-avatar">
                <span class="avatar-initial">💻</span>
              </div>
              <div class="item-info">
                <span class="item-name">Tech Talk</span>
                <span class="item-status">25 members</span>
              </div>
            </div>
          </div>
        </div>

        <!-- No Users Message -->
        <div class="no-users" *ngIf="onlineUsers.length === 0">
          <p>No other users online</p>
        </div>
      </div>
    </aside>

    <!-- Main Chat Area -->
    <main class="chat-main">
      <!-- Horizontal Navigation Tabs -->
      <div class="chat-tabs">
        <button 
          class="tab-button" 
          [class.active]="activeTab === 'general'"
          (click)="switchTab('general')"
        >
          💬 General
        </button>
        <button 
          class="tab-button" 
          [class.active]="activeTab === 'private'"
          (click)="switchTab('private')"
        >
          🔒 Private
        </button>
        <button 
          class="tab-button" 
          [class.active]="activeTab === 'rooms'"
          (click)="switchTab('rooms')"
        >
          🏠 Rooms
        </button>
        <button 
          class="tab-button" 
          [class.active]="activeTab === 'friends'"
          (click)="switchTab('friends')"
        >
          👥 Friends
        </button>
      </div>

      <!-- Tab Content -->
      <div class="tab-content">
        <!-- General Chat -->
        <app-general-chat 
          *ngIf="activeTab === 'general'"
          [currentUser]="currentUser">
        </app-general-chat>

        <!-- Private Chat -->
        <app-private-chat 
          *ngIf="activeTab === 'private'"
          [currentUser]="currentUser"
          [onlineUsers]="onlineUsers">
        </app-private-chat>

        <!-- Room Chat -->
        <app-room-chat 
          *ngIf="activeTab === 'rooms'"
          [currentUser]="currentUser">
        </app-room-chat>

        <!-- Friends -->
        <app-friends 
          *ngIf="activeTab === 'friends'"
          [currentUser]="currentUser"
          [onlineUsers]="onlineUsers">
        </app-friends>
      </div>
    </main>
  </div>
</div>
